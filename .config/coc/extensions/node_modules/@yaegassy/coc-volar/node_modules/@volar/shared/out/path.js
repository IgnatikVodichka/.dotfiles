Object.defineProperty(exports, "__esModule", { value: true });
exports.isFileInDir = exports.getUriByPath = exports.normalizeFileName = exports.getPathOfUri = void 0;
const vscode_uri_1 = require("vscode-uri");
const path = require("typesafe-path");
function getPathOfUri(uri) {
    if (uri.startsWith('https://cdn.jsdelivr.net/npm/')) {
        return '/__uri__/node_modules/' + uri.replace('https://cdn.jsdelivr.net/npm/', '');
    }
    const _uri = vscode_uri_1.URI.parse(uri);
    if (_uri.scheme === 'file') {
        return _uri.fsPath.replace(/\\/g, '/');
    }
    else {
        return '/__uri__/' + uri.replace('://', '__uri_scheme__');
    }
}
exports.getPathOfUri = getPathOfUri;
function normalizeFileName(fsPath) {
    return getPathOfUri(getUriByPath(fsPath));
}
exports.normalizeFileName = normalizeFileName;
function getUriByPath(path) {
    if (path.startsWith('/__uri__/node_modules/')) {
        return path.replace('/__uri__/node_modules/', 'https://cdn.jsdelivr.net/npm/');
    }
    if (path.startsWith('/__uri__/')) {
        return path.replace('/__uri__/', '').replace('__uri_scheme__', '://');
    }
    return vscode_uri_1.URI.file(path).toString();
}
exports.getUriByPath = getUriByPath;
function isFileInDir(fileName, dir) {
    const relative = path.relative(dir, fileName);
    return !!relative && !relative.startsWith('..') && !path.isAbsolute(relative);
}
exports.isFileInDir = isFileInDir;
//# sourceMappingURL=path.js.map